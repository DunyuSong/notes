# 接口自动化平台用户手册
## 前置条件
### 将用户添加至公司的统一权限管理平台
1. 添加项目访问权限：登录公司的[权限管理平台](http://192.168.103.83:8080/gfpermission/main.jsp)
2. 添加用户：用户管理==>接口管理平台==>添加用户==>......==>启动
3. 设置用户角色：用户管理==>接口管理平台==>找到用户xx==>角色设置==>勾选“系统管理员”
- 权限平台_添加用户
<img src="images/权限平台_添加用户.gif" alt="图片描述" width="90%" height="100%"><br/>

## 联系我们
- 紧急问题反馈QQ群：157410163

### 使用过程中问题反馈
- 功能问题请提交至TAPD中的[缺陷模块](https://www.tapd.cn/40275868/bugtrace/bugreports/my_view)。**提交时“缺陷类型”选择“功能缺陷”**。
- 体验、需求等问题请提交至TAPD中的[缺陷模块](https://www.tapd.cn/40275868/bugtrace/bugreports/my_view)。**提交时“缺陷类型”选择“设计缺陷”**。
- 各模块负责人
    - 页面上增删改查等问题：@李金鹏,QQ:765488261
    - 点击“执行”之后提示“执行跳过”一般是系统内部错误反馈：@单东东,QQ:119135678。如果提示“执行失败”一般是断言失败，预期结果与实际结果不符，请检查用例。
    - Mock测试问题反馈：@陈肯，QQ:450406910

## 接口定义
- 接口定义可以定义GET、POST等请求方法的HTTP类型接口。创建接口可以在接口定义页面进行创建。

- 接口名称：表示定义的此接口的名称。

- 路径：表示定义的接口的URL与请求方法。

- 最后更新：表示此接口最近的更新时间。

- 责任人：表示定义的接口的责任人。

- 标签：表示定义的此接口的标签。

- 操作：
    - 编辑：编辑接口。跳转至编辑接口详情页面。编辑定义的接口的基本信息等。定义接口的请求信息、响应信息以及请求数据。
    - 删除：删除。删除此接口，不可恢复。
### 创建接口
- 创建HTTP类型接口：接口定义==>创建接口。

- 名称：定义接口名称。

- 请求：定义接口HTTP的请求方法，GET、POST等请求方法。

- URL：定义接口的路径。

- 责任人：定义此接口的责任人。

- 描述：定义创建的接口的详情或其它。

- 取消：取消创建当前接口。

- 保存：保存此定义的接口。
- 创建接口
<img src="images/接口定义_创建接口.gif" alt="图片描述" width="90%" height="100%"><br/>
- 当您创建一个接口之后系统默认会自动创建此接口对应的用例集
<img src="images/接口定义_自动创建接口用例集.png" alt="图片描述" width="90%" height="100%"><br/>
- 编辑接口
<img src="images/接口定义_编辑接口.gif" alt="图片描述" width="90%" height="100%"><br/>

## 接口测试
- 用于在定义的HTTP接口中添加、编辑、执行测试用例，进行接口的测试，检测外部系统与所测系统之间以及内部各系统之间的交互点，验证其正确性。

- 接口名称：表示定义的此接口的名称。

- 路径：表示定义的接口的URL与请求方法。

- 用例数：表示此接口下所存在的用例数目。

- 责任人：表示此接口的创建人。

- 操作：
    - 编辑：跳转至接口测试详情页面，进行用例的添加、删除或执行等操作。
    - 删除：清空此接口所有用例。清空当前接口中的所有添加的用例，删除后不可恢复。

注：在用例列表页面单击此用例名称也可以进入用例编辑页面。

### 创建用例
- 测试用例（Test Case）是为某个特殊目标而编制的一组测试输入、执行条件以及预期结果，以便测试某个程序路径或验证是否满足某个特定需求。

- 复制用例：复制此用例的所有数据。

- 执行：执行此测试用例。

- 最新执行结果：可查看此用例最后一次执行结果。

- 执行结果历史列表：可查看此用例执行历史结果。

- 创建并编辑用例
<img src="images/接口测试_创建并编辑用例.gif" alt="图片描述" width="90%" height="100%"><br/>

### 用例参数
#### 参数类型
- 固定值($[invariantValue]):用于参数的列值数据定义一个固定的值或格式。
- 时间戳_秒($[timeSecond]):生成某一时刻的时间戳（秒），以证明某些数据的产生时间。表示将用例执行时的时间戳（秒）赋值给参数列，单位为秒。
- 时间戳_毫秒($[timeMilliSecond]):生成某一时刻的时间戳（毫秒），以证明某些数据的产生时间。表示将用例执行时的时间戳（毫秒）赋值给参数列，单位为毫秒。
- 随机数($[randomNumber]):用于生成随机的数字，参数值列数据输入数字的自由多样化。
- 随机字符串($[randomString]):用于生成随机的字符串，参数值列数据输入字符串的自由多样化。
- 公共参数($[公共参数]):用于在使用频率高或特定类型的参数，在用例中方便快捷的应用。

#### 校验
- 对响应结果的数据采用何种方式进行提取数据，用于和预期数据进行对比验证。
- 校验类型：
    - JsonPath：使用Json表达式进行提取，用于响应体为json格式的数据提取。
    - Map：使用key=value形式进行提取，用于响应头、响应状态码的提取。
- 校验方式：
    - 全匹配_区分大小写(equals): 用于校验响应中是否存在某一字符串与预期结果完全相同，区分大小写。
    - 全匹配_不区分大小写(equalsIgnoreCase):用于校验响应中是否存在某一字符串与预期结果完全相同，不区分大小写。
    - 包含_不区分大小写(isContains): 用于校验响应中是否包含某一字符串。区分大小写。
    - 包含_不区分大小写(isContainsIgnoreCase): 用于校验响应中是否包含某一字符串。不区分大小写。
    - 不等于(notEquals): 用于校验响应中是否存在某一字符串与预期结不等于。
    - 小于(lessThan): 用于校验响应中是否存在某一数字小于预期结果中的数字。
    - 小于等于(lessThanOrEquals):用于校验响应中是否存在某一数字小于等于预期结果中的数字。
    - 大于(greaterThan):用于校验响应中是否存在某一数字大于预期结果中的数字。
    - 大于等于(greaterThanOrEquals):用于校验响应中是否存在某一数字大于等于预期结果中的数字。
- 参数：提取数据的表达式
- 值：预期结果

#### URL参数
- 定义URL参数。key=value形式

#### 头部
- 请求头数据，如 HTTP 首部中以 Content-Type 这个字段来表示报文主体的对象类型。

#### 请求体
##### form_data
##### raw
- raw数据格式类型目前仅支持:applicatin/json.如果需要对请求体的部分数据加密需要勾选“提取方式”。JSON编辑可参考[小工具](#小工具)
- Rent_BodyEncryption：仅用于5866U号租签名上的请求体加密，非标准

#### 加密认证
- 认证：Rent_URLSign，U号租请求URL签名。

#### 校验
1. 校验响应头：校验类型只能选择“Map”.比如：Content-Type=application/json;charset=UTF-8
2. 校验响应体：校验类型根据实际结果选择。比如：JsonPath、Xpath、XMLPath、正则表达式。
3. 校验状态码：校验类型只能选择“Map”。比如：statusCode=200

- 添加校验
<img src="images/接口测试_添加校验.gif" alt="图片描述" width="90%" height="100%"><br/>

### 运行用例
- 执行单个用例
<img src="images/接口测试_执行用例.gif" alt="图片描述" width="90%" height="100%"><br/>
- 查看单个用例最近一次执行结果
<img src="images/接口测试_查看最近一次执行结果.gif" alt="图片描述" width="90%" height="100%"><br/>
- 查看用例执行历史
<img src="images/接口测试_查看历史结果.gif" alt="图片描述" width="90%" height="100%"><br/>

## Mock测试
### Mock接口
### Mock接口证书

## 项目管理
### 创建项目添加项目人员
1. 创建项目：主菜单==>项目管理==>创建项目==>这里选择的“责任人”默认将此用户添加到此项目并设置为“项目管理员”。
2. 添加用户：主菜单==>项目管理==>成员管理==>输入“域账号”点击“添加成员”.(**注意:这添加的用户必须是登入过本系统的人员，如未登入过此系统不允许添加**)
3. 删除用户：主菜单==>项目管理==>成员管理==>删除。
- 创建项目
<img src="images/项目管理_创建项目.gif" alt="图片描述" width="90%" height="100%"><br/>
- 添加用户
<img src="images/项目管理_添加用户.gif" alt="图片描述" width="90%" height="100%"><br/>

### 添加项目管理员
- 路径：主菜单==>项目管理==>成员管理==>勾选“项目项目管理员”即可。
- 作用：管理项目及项目中的人员，项目管理员可以增删改查项目及用户。被勾选的用户点击左侧“项目管理”菜单会出现改项目。
- 职责：由系统开发人员管理，项目管理人员无需配置。职责与用户绑定，比如系统配置“开发”只能使用“接口定义”功能，此时给用户Tom设置的职责是“开发”，那么Tom“接口定义”模块功能不可使用，反之亦然。
- 项目管理_添加用户至项目并设置为项目管理员
<img src="images/项目管理_添加用户至项目并设置为项目管理员.gif" alt="图片描述" width="90%" height="100%"><br/>

## 小工具
### JSON工具
- JSON 在线编辑工具: [JSON Editor Online](https://jsoneditoronline.org/)
- JSON Path 在线验证工具: [JSON Path Online Evaluator](http://jsonpath.com/)
- JSON Path 在线获取工具：[JSON Path Finder](http://jsonpathfinder.com/)