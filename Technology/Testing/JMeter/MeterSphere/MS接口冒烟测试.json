{"type":"MS API CONFIG","version":"1.5.0","scenarios":[{"id":"b162cbbc-5633-4bd7-93fd-e17657d90c28","name":"组织管理","variables":[{"name":"org_name","value":"${__RandomString(9,fit2cloud)}","enable":true},{"name":"worker_name","value":"${__RandomString(9,fit2cloud)}","enable":true},{"name":"project_name","value":"${__RandomString(9,fit2cloud)}","enable":true},{"name":"user_name","value":"${__RandomString(9,fit2cloud)}","enable":true},{"enable":true}],"headers":[{"name":"Content-Type","value":"application/json","enable":true},{"enable":true}],"requests":[{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"添加工作空间","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[{"type":"JSONPath","variable":"worker_id","value":"${worker_id}","expression":"$.data.id"}],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af"},"url":"https://project/listAll","path":"/workspace/special/add","method":"POST","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"Raw","raw":"{\n    \"organizationId\": \"${org_id}\",\n    \"name\": \"${worker_name}\",\n    \"description\": \"from api\",\n    \"createTime\": 0,\n    \"updateTime\": 0\n}","kvs":[{"type":"text","enable":true,"contentType":"text/plain"}],"format":"json"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"更新组织","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af"},"url":"https://project/listAll","path":"/organization/update","method":"POST","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"Raw","raw":"{\n    \"id\": \"${org_id}\",\n    \"name\": \"${org_name}\",\n    \"description\": \"form api\",\n    \"createTime\": 0,\n    \"updateTime\": 0\n}","kvs":[{"value":"","type":"text","enable":true,"contentType":"text/plain"}],"format":"json"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"添加项目","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[{"type":"JSONPath","variable":"project_id","value":"${project_id}","expression":"$.data.id"}],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af"},"url":"https://project/listAll","path":"/project/add","method":"POST","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"Raw","raw":"{\n    \"workspaceId\": \"${worker_id}\",\n    \"name\": \"${project_name}\",\n    \"description\": \"from api\",\n    \"createTime\": 0,\n    \"updateTime\": 0\n}","kvs":[{"type":"text","enable":true,"contentType":"text/plain"}],"format":"json"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"添加组织","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[{"type":"JSONPath","variable":"org_id","value":"${org_id}","expression":"$.data.id","multipleMatching":false}],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af"},"url":"https://project/listAll","path":"/organization/add","method":"POST","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"Raw","raw":"{\n    \"name\": \"${org_name}\",\n    \"description\": \"form api\",\n    \"createTime\": 0,\n    \"updateTime\": 0\n}","kvs":[{"value":"","type":"text","enable":true,"contentType":"text/plain"}],"format":"json"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"查询项目","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n    //props.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"script":"","language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af"},"url":"https://project/listAll","path":"/project/listAll","method":"GET","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"KeyValue","kvs":[{"type":"text","enable":true,"contentType":"text/plain"}],"format":"text"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"查询用户","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af"},"url":"https://project/listAll","path":"/user/list","method":"GET","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"KeyValue","kvs":[{"type":"text","enable":true,"contentType":"text/plain"}],"format":"text"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"查询角色","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[{"type":"JSONPath","variable":"role-admin","value":"${role-admin}","expression":"$.data[0].name"}],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af"},"url":"https://project/listAll","path":"/role/all","method":"GET","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"KeyValue","kvs":[{"type":"text","enable":true,"contentType":"text/plain"}],"format":"text"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"创建用户","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[{"type":"JSONPath","variable":"user_id","value":"${user_id}","expression":"$.data.id"}],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af"},"url":"https://project/listAll","path":"/user/special/add","method":"POST","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"Raw","raw":"{\n    \"id\": \"${user_name}\",\n    \"name\": \"${user_name}\",\n    \"email\": \"${user_name}@fit2cloud.com\",\n    \"password\": \"Calong@2015!\",\n    \"status\": \"1\",\n    \"createTime\": 0,\n    \"updateTime\": 0,\n    \"language\": \"null\",\n    \"lastWorkspaceId\": \"${worker_id}\",\n    \"lastOrganizationId\": \"${project_id}\",\n    \"phone\": \"${__time(/100,)}\",\n    \"source\": \"LOCAL\",\n    \"roles\": [\n        {\n            \"id\": \"admin\",\n            \"name\": \"${role-admin}\",\n            \"description\": \"form api\",\n            \"type\": \"admin\",\n            \"createTime\": 0,\n            \"updateTime\": 0\n        }\n    ]\n}","kvs":[{"type":"text","enable":true,"contentType":"text/plain"}],"format":"json"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"删除组织","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af","operator":"=="},"url":"https://project/listAll","path":"/organization/delete/${org_id}","method":"GET","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"KeyValue","raw":"","kvs":[{"value":"","type":"text","enable":true,"contentType":"text/plain"}],"format":"json"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"删除项目","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af","operator":"=="},"url":"https://project/listAll","path":"/project/delete/${project_id}","method":"GET","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"KeyValue","raw":"","kvs":[{"value":"","type":"text","enable":true,"contentType":"text/plain"}],"format":"json"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true},{"type":"HTTP","id":"6743c595-e9f7-4dfa-8d26-17c0a356cd84","name":"删除用户","enable":true,"assertions":{"text":[],"regex":[],"jsonPath":[{"type":"JSON","expression":"$.success","expect":"true","description":"$.success expect: true"}],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}},"extract":{"regex":[],"json":[],"xpath":[]},"jsr223PreProcessor":{"script":"import org.apache.commons.codec.binary.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nString accessKey = \"${accessKey}\";\nString secretKey = \"${secretKey}\";\n\npublic static String aesEncrypt(String src, String secretKey, String iv) throws Exception {\n    byte[] raw = secretKey.getBytes(\"UTF-8\");\n    SecretKeySpec secretKeySpec = new SecretKeySpec(raw, \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n    IvParameterSpec iv1 = new IvParameterSpec(iv.getBytes());\n    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, iv1);\n    byte[] encrypted = cipher.doFinal(src.getBytes(\"UTF-8\"));\n    return Base64.encodeBase64String(encrypted);\n}\n\ntry {\n    //调用加密算法生成签名\n    String signature = aesEncrypt(accessKey + \"|\" + System.currentTimeMillis(), secretKey, accessKey);\n    //将签名值存入 signature 变量中\n    vars.put(\"signature\",signature);\n} catch (Exception e) {\n    e.printStackTrace();\n}","language":"beanshell"},"jsr223PostProcessor":{"language":"beanshell"},"timer":{"type":"Constant Timer","enable":true,"id":"9a2d4cc7-1075-4c65-9f63-c164593dad4b"},"controller":{"type":"If Controller","enable":true,"id":"7d384cd2-90a6-4158-af0a-c985e48af6af","operator":"=="},"url":"https://project/listAll","path":"/user/special/delete/${user_id}","method":"GET","parameters":[{"type":"text","enable":true,"contentType":"text/plain"}],"headers":[{"name":"accessKey","value":"${accessKey}","enable":true},{"name":"signature","value":"${signature}","enable":true},{"enable":true}],"body":{"type":"KeyValue","raw":"","kvs":[{"value":"","type":"text","enable":true,"contentType":"text/plain"}],"format":"json"},"useEnvironment":true,"connectTimeout":60000,"followRedirects":true}],"environmentId":"efd3d5b8-0c10-4f2d-b875-655056f04f98","dubboConfig":{"configCenter":{},"registryCenter":{},"consumerAndService":{"timeout":"1000","version":"1.0","retries":"0","cluster":"failfast","connections":"100","async":"sync","loadBalance":"random"}},"environment":{"id":"efd3d5b8-0c10-4f2d-b875-655056f04f98","name":"MSURL","projectId":"70ba2417-0ebf-454b-b948-55d3da1950d0","protocol":null,"socket":null,"domain":null,"port":null,"variables":null,"headers":null,"config":{"commonConfig":{"variables":[{"enable":true}],"enableHost":false,"hosts":[]},"httpConfig":{"socket":"http//10.1.240.130:8081","domain":"http","headers":[{"enable":true}],"protocol":"http","port":""},"databaseConfigs":[],"tcpConfig":{"classname":"TCPClientImpl","reUseConnection":true,"nodelay":false,"closeConnection":false}},"hosts":null},"enableCookieShare":true,"enable":true,"databaseConfigs":[],"tcpConfig":{"classname":"TCPClientImpl","reUseConnection":true,"nodelay":false,"closeConnection":false},"assertions":{"text":[],"regex":[],"jsonPath":[],"jsr223":[],"xpath2":[],"duration":{"type":"Duration","value":0}}}]}